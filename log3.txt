Starting Chess Engine Interactive Debugger...
Static tables initialized.

==================================================
Enter FEN string to start a new game (or 'quit' to exit):
Default FEN: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
4r1K1/3P4/8/8/8/8/6k1/8 w - - 0 1

Board initialized from FEN: 4r1K1/3P4/8/8/8/8/6k1/8 w - - 0 1

--- Current Board State ---
--- All Occupied Squares Bitboard ---
0 0 0 0 1 0 1 0
0 0 0 1 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 1 0
0 0 0 0 0 0 0 0


  FEN: 4r1K1/3P4/8/8/8/8/6k1/8 w - - 0 1
  Turn: White
  Castling Rights: -
  En Passant Target: -
  Halfmove Clock: 0
  Fullmove Number: 1
  Is White King in check:
--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 1000000000000000
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 5008000000004000
DEBUG: Rook/Queen Check. Attackers BB: 1000000000000000
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=1000000000000000, occupied_bb=5008000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=1000000000000000
DEBUG: King attacked by Rook/Queen!
YES
  Is Black King in check:
--- DEBUG: is_king_in_check for Black King ---
King Square: 2 (Index: 14)
Attacking Color: White
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 1000000000000000
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 5008000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=14, attackers_bb=0, occupied_bb=5008000000004000
DEBUG: get_sliding_attacks: start_sq=14, delta=1
DEBUG: get_sliding_attacks: Added square 15, attacks now: 8000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 16
DEBUG: is_rook_queen_attacked_by: Ray from 14 with delta 1 -> attacks=8000
DEBUG: get_sliding_attacks: start_sq=14, delta=-1
DEBUG: get_sliding_attacks: Added square 13, attacks now: 2000
DEBUG: get_sliding_attacks: Added square 12, attacks now: 3000
DEBUG: get_sliding_attacks: Added square 11, attacks now: 3800
DEBUG: get_sliding_attacks: Added square 10, attacks now: 3c00
DEBUG: get_sliding_attacks: Added square 9, attacks now: 3e00
DEBUG: get_sliding_attacks: Added square 8, attacks now: 3f00
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 7
DEBUG: is_rook_queen_attacked_by: Ray from 14 with delta -1 -> attacks=3f00
DEBUG: get_sliding_attacks: start_sq=14, delta=8
DEBUG: get_sliding_attacks: Added square 22, attacks now: 400000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40400000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 4040400000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 404040400000
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 62, attacks now: 4040404040400000
DEBUG: get_sliding_attacks: Blocker found at 62
DEBUG: is_rook_queen_attacked_by: Ray from 14 with delta 8 -> attacks=4040404040400000
DEBUG: get_sliding_attacks: start_sq=14, delta=-8
DEBUG: get_sliding_attacks: Added square 6, attacks now: 40
DEBUG: get_sliding_attacks: Out of bounds at -2
DEBUG: is_rook_queen_attacked_by: Ray from 14 with delta -8 -> attacks=40
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=404040404040bf40
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=14, attackers_bb=0, occupied_bb=5008000000004000
DEBUG: get_sliding_attacks: start_sq=14, delta=9
DEBUG: get_sliding_attacks: Added square 23, attacks now: 800000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 32
DEBUG: get_sliding_attacks: start_sq=14, delta=-9
DEBUG: get_sliding_attacks: Added square 5, attacks now: 20
DEBUG: get_sliding_attacks: Out of bounds at -4
DEBUG: get_sliding_attacks: start_sq=14, delta=7
DEBUG: get_sliding_attacks: Added square 21, attacks now: 200000
DEBUG: get_sliding_attacks: Added square 28, attacks now: 10200000
DEBUG: get_sliding_attacks: Added square 35, attacks now: 810200000
DEBUG: get_sliding_attacks: Added square 42, attacks now: 40810200000
DEBUG: get_sliding_attacks: Added square 49, attacks now: 2040810200000
DEBUG: get_sliding_attacks: Added square 56, attacks now: 102040810200000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 63
DEBUG: get_sliding_attacks: start_sq=14, delta=-7
DEBUG: get_sliding_attacks: Added square 7, attacks now: 80
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 0
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
NO
  Zobrist Hash: 16449830729915908062
--- APPLYING MOVE: d7d8q ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Piece Move 0): from_sq=51, to_sq=59
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Promotion): Promotion from 51 to 59 to piece type 4
  Before pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  Before promoted piece set: promoted_bb_ptr=0x33f5dff550, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted piece set: promoted_bb_ptr=0x33f5dff550, *promoted_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_END: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 1000000000000000
Current White Queens BB: 800000000000000
Current Black Queens BB: 0
Current Occupied Squares BB: 5800000000004000
DEBUG: Rook/Queen Check. Attackers BB: 1000000000000000
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=1000000000000000, occupied_bb=5800000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=1000000000000000
DEBUG: King attacked by Rook/Queen!
MOVE REJECTED (King in Check): d7d8q
--- UNDOING MOVE: d7d8q ---
UNDO_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Promotion): Promotion from 51 to 59 to piece type 4
  Before promoted clear: promoted_bb_ptr=0x33f5dff550, *promoted_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted clear: promoted_bb_ptr=0x33f5dff550, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
UNDO_DEBUG (Piece Move 0): from_sq=51, to_sq=59
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
--- APPLYING MOVE: d7d8r ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Piece Move 0): from_sq=51, to_sq=59
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Promotion): Promotion from 51 to 59 to piece type 3
  Before pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  Before promoted piece set: promoted_bb_ptr=0x33f5dff548, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted piece set: promoted_bb_ptr=0x33f5dff548, *promoted_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_END: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 800000000000000
Current Black Rooks BB: 1000000000000000
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 5800000000004000
DEBUG: Rook/Queen Check. Attackers BB: 1000000000000000
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=1000000000000000, occupied_bb=5800000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=1000000000000000
DEBUG: King attacked by Rook/Queen!
MOVE REJECTED (King in Check): d7d8r
--- UNDOING MOVE: d7d8r ---
UNDO_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Promotion): Promotion from 51 to 59 to piece type 3
  Before promoted clear: promoted_bb_ptr=0x33f5dff548, *promoted_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted clear: promoted_bb_ptr=0x33f5dff548, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
UNDO_DEBUG (Piece Move 0): from_sq=51, to_sq=59
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
--- APPLYING MOVE: d7d8b ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Piece Move 0): from_sq=51, to_sq=59
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Promotion): Promotion from 51 to 59 to piece type 2
  Before pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  Before promoted piece set: promoted_bb_ptr=0x33f5dff540, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted piece set: promoted_bb_ptr=0x33f5dff540, *promoted_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_END: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 1000000000000000
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 5800000000004000
DEBUG: Rook/Queen Check. Attackers BB: 1000000000000000
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=1000000000000000, occupied_bb=5800000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=1000000000000000
DEBUG: King attacked by Rook/Queen!
MOVE REJECTED (King in Check): d7d8b
--- UNDOING MOVE: d7d8b ---
UNDO_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Promotion): Promotion from 51 to 59 to piece type 2
  Before promoted clear: promoted_bb_ptr=0x33f5dff540, *promoted_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted clear: promoted_bb_ptr=0x33f5dff540, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
UNDO_DEBUG (Piece Move 0): from_sq=51, to_sq=59
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
--- APPLYING MOVE: d7d8n ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Piece Move 0): from_sq=51, to_sq=59
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Promotion): Promotion from 51 to 59 to piece type 1
  Before pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  Before promoted piece set: promoted_bb_ptr=0x33f5dff538, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted piece set: promoted_bb_ptr=0x33f5dff538, *promoted_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_END: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 1000000000000000
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 5800000000004000
DEBUG: Rook/Queen Check. Attackers BB: 1000000000000000
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=1000000000000000, occupied_bb=5800000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=1000000000000000
DEBUG: King attacked by Rook/Queen!
MOVE REJECTED (King in Check): d7d8n
--- UNDOING MOVE: d7d8n ---
UNDO_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Promotion): Promotion from 51 to 59 to piece type 1
  Before promoted clear: promoted_bb_ptr=0x33f5dff538, *promoted_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted clear: promoted_bb_ptr=0x33f5dff538, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
UNDO_DEBUG (Piece Move 0): from_sq=51, to_sq=59
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=800000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5800000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
--- APPLYING MOVE: d7e8q ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Piece Move 0): from_sq=51, to_sq=60
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000, Occupied BB: 5008000000004000
APPLY_DEBUG (Capture): captured_sq=60
  Before clear: captured_piece_bb_ptr=0x33f5dff578, *captured_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 1000000000000000
  After clear: captured_piece_bb_ptr=0x33f5dff578, *captured_piece_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5008000000004000
APPLY_DEBUG (Promotion): Promotion from 51 to 60 to piece type 4
  Before pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  Before promoted piece set: promoted_bb_ptr=0x33f5dff550, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted piece set: promoted_bb_ptr=0x33f5dff550, *promoted_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5008000000004000
APPLY_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 0
Current White Queens BB: 1000000000000000
Current Black Queens BB: 0
Current Occupied Squares BB: 5000000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=0, occupied_bb=5000000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=62, attackers_bb=0, occupied_bb=5000000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=9
DEBUG: get_sliding_attacks: Out of bounds at 71
DEBUG: get_sliding_attacks: start_sq=62, delta=-9
DEBUG: get_sliding_attacks: Added square 53, attacks now: 20000000000000
DEBUG: get_sliding_attacks: Added square 44, attacks now: 20100000000000
DEBUG: get_sliding_attacks: Added square 35, attacks now: 20100800000000
DEBUG: get_sliding_attacks: Added square 26, attacks now: 20100804000000
DEBUG: get_sliding_attacks: Added square 17, attacks now: 20100804020000
DEBUG: get_sliding_attacks: Added square 8, attacks now: 20100804020100
DEBUG: get_sliding_attacks: Out of bounds at -1
DEBUG: get_sliding_attacks: start_sq=62, delta=7
DEBUG: get_sliding_attacks: Out of bounds at 69
DEBUG: get_sliding_attacks: start_sq=62, delta=-7
DEBUG: get_sliding_attacks: Added square 55, attacks now: 80000000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 48
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: d7e8q ---
UNDO_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Promotion): Promotion from 51 to 60 to piece type 4
  Before promoted clear: promoted_bb_ptr=0x33f5dff550, *promoted_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted clear: promoted_bb_ptr=0x33f5dff550, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
UNDO_DEBUG (Piece Move 0): from_sq=51, to_sq=60
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- APPLYING MOVE: d7e8r ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Piece Move 0): from_sq=51, to_sq=60
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Capture): captured_sq=60
  Before clear: captured_piece_bb_ptr=0x33f5dff578, *captured_piece_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear: captured_piece_bb_ptr=0x33f5dff578, *captured_piece_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Promotion): Promotion from 51 to 60 to piece type 3
  Before pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  Before promoted piece set: promoted_bb_ptr=0x33f5dff548, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted piece set: promoted_bb_ptr=0x33f5dff548, *promoted_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 1000000000000000
Current Black Rooks BB: 0
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 5000000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=0, occupied_bb=5000000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=62, attackers_bb=0, occupied_bb=5000000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=9
DEBUG: get_sliding_attacks: Out of bounds at 71
DEBUG: get_sliding_attacks: start_sq=62, delta=-9
DEBUG: get_sliding_attacks: Added square 53, attacks now: 20000000000000
DEBUG: get_sliding_attacks: Added square 44, attacks now: 20100000000000
DEBUG: get_sliding_attacks: Added square 35, attacks now: 20100800000000
DEBUG: get_sliding_attacks: Added square 26, attacks now: 20100804000000
DEBUG: get_sliding_attacks: Added square 17, attacks now: 20100804020000
DEBUG: get_sliding_attacks: Added square 8, attacks now: 20100804020100
DEBUG: get_sliding_attacks: Out of bounds at -1
DEBUG: get_sliding_attacks: start_sq=62, delta=7
DEBUG: get_sliding_attacks: Out of bounds at 69
DEBUG: get_sliding_attacks: start_sq=62, delta=-7
DEBUG: get_sliding_attacks: Added square 55, attacks now: 80000000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 48
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: d7e8r ---
UNDO_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Promotion): Promotion from 51 to 60 to piece type 3
  Before promoted clear: promoted_bb_ptr=0x33f5dff548, *promoted_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted clear: promoted_bb_ptr=0x33f5dff548, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
UNDO_DEBUG (Piece Move 0): from_sq=51, to_sq=60
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- APPLYING MOVE: d7e8b ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Piece Move 0): from_sq=51, to_sq=60
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Capture): captured_sq=60
  Before clear: captured_piece_bb_ptr=0x33f5dff578, *captured_piece_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear: captured_piece_bb_ptr=0x33f5dff578, *captured_piece_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Promotion): Promotion from 51 to 60 to piece type 2
  Before pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  Before promoted piece set: promoted_bb_ptr=0x33f5dff540, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted piece set: promoted_bb_ptr=0x33f5dff540, *promoted_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 0
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 5000000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=0, occupied_bb=5000000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=62, attackers_bb=0, occupied_bb=5000000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=9
DEBUG: get_sliding_attacks: Out of bounds at 71
DEBUG: get_sliding_attacks: start_sq=62, delta=-9
DEBUG: get_sliding_attacks: Added square 53, attacks now: 20000000000000
DEBUG: get_sliding_attacks: Added square 44, attacks now: 20100000000000
DEBUG: get_sliding_attacks: Added square 35, attacks now: 20100800000000
DEBUG: get_sliding_attacks: Added square 26, attacks now: 20100804000000
DEBUG: get_sliding_attacks: Added square 17, attacks now: 20100804020000
DEBUG: get_sliding_attacks: Added square 8, attacks now: 20100804020100
DEBUG: get_sliding_attacks: Out of bounds at -1
DEBUG: get_sliding_attacks: start_sq=62, delta=7
DEBUG: get_sliding_attacks: Out of bounds at 69
DEBUG: get_sliding_attacks: start_sq=62, delta=-7
DEBUG: get_sliding_attacks: Added square 55, attacks now: 80000000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 48
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: d7e8b ---
UNDO_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Promotion): Promotion from 51 to 60 to piece type 2
  Before promoted clear: promoted_bb_ptr=0x33f5dff540, *promoted_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted clear: promoted_bb_ptr=0x33f5dff540, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
UNDO_DEBUG (Piece Move 0): from_sq=51, to_sq=60
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- APPLYING MOVE: d7e8n ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Piece Move 0): from_sq=51, to_sq=60
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Capture): captured_sq=60
  Before clear: captured_piece_bb_ptr=0x33f5dff578, *captured_piece_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear: captured_piece_bb_ptr=0x33f5dff578, *captured_piece_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Promotion): Promotion from 51 to 60 to piece type 1
  Before pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After pawn clear: pawn_bb_ptr=0x33f5dff530, *pawn_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  Before promoted piece set: promoted_bb_ptr=0x33f5dff538, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted piece set: promoted_bb_ptr=0x33f5dff538, *promoted_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 62)
Attacking Color: Black
Current White King BB: 4000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 0
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 5000000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=62, attackers_bb=0, occupied_bb=5000000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=1
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 1 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=-1
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 3000000000000000
DEBUG: get_sliding_attacks: Blocker found at 60
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -1 -> attacks=3000000000000000
DEBUG: get_sliding_attacks: start_sq=62, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=62, delta=-8
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 46, attacks now: 40400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 40404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 40404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 40404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 40404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 62 with delta -8 -> attacks=40404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=b040404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=62, attackers_bb=0, occupied_bb=5000000000004000
DEBUG: get_sliding_attacks: start_sq=62, delta=9
DEBUG: get_sliding_attacks: Out of bounds at 71
DEBUG: get_sliding_attacks: start_sq=62, delta=-9
DEBUG: get_sliding_attacks: Added square 53, attacks now: 20000000000000
DEBUG: get_sliding_attacks: Added square 44, attacks now: 20100000000000
DEBUG: get_sliding_attacks: Added square 35, attacks now: 20100800000000
DEBUG: get_sliding_attacks: Added square 26, attacks now: 20100804000000
DEBUG: get_sliding_attacks: Added square 17, attacks now: 20100804020000
DEBUG: get_sliding_attacks: Added square 8, attacks now: 20100804020100
DEBUG: get_sliding_attacks: Out of bounds at -1
DEBUG: get_sliding_attacks: start_sq=62, delta=7
DEBUG: get_sliding_attacks: Out of bounds at 69
DEBUG: get_sliding_attacks: start_sq=62, delta=-7
DEBUG: get_sliding_attacks: Added square 55, attacks now: 80000000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 48
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: d7e8n ---
UNDO_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Promotion): Promotion from 51 to 60 to piece type 1
  Before promoted clear: promoted_bb_ptr=0x33f5dff538, *promoted_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  After promoted clear: promoted_bb_ptr=0x33f5dff538, *promoted_bb_ptr=0
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
UNDO_DEBUG (Piece Move 0): from_sq=51, to_sq=60
  Before clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=1000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff530, *moving_piece_bb_ptr=8000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 5000000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- APPLYING MOVE: g8f7 ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Piece Move 5): from_sq=62, to_sq=53
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=20000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 20000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_END: White King BB: 20000000000000, Black Rook BB: 0, Occupied BB: 28000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 7 (Index: 53)
Attacking Color: Black
Current White King BB: 20000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 0
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 28000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=53, attackers_bb=0, occupied_bb=28000000004000
DEBUG: get_sliding_attacks: start_sq=53, delta=1
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 55, attacks now: c0000000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 56
DEBUG: is_rook_queen_attacked_by: Ray from 53 with delta 1 -> attacks=c0000000000000
DEBUG: get_sliding_attacks: start_sq=53, delta=-1
DEBUG: get_sliding_attacks: Added square 52, attacks now: 10000000000000
DEBUG: get_sliding_attacks: Added square 51, attacks now: 18000000000000
DEBUG: get_sliding_attacks: Blocker found at 51
DEBUG: is_rook_queen_attacked_by: Ray from 53 with delta -1 -> attacks=18000000000000
DEBUG: get_sliding_attacks: start_sq=53, delta=8
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 69
DEBUG: is_rook_queen_attacked_by: Ray from 53 with delta 8 -> attacks=2000000000000000
DEBUG: get_sliding_attacks: start_sq=53, delta=-8
DEBUG: get_sliding_attacks: Added square 45, attacks now: 200000000000
DEBUG: get_sliding_attacks: Added square 37, attacks now: 202000000000
DEBUG: get_sliding_attacks: Added square 29, attacks now: 202020000000
DEBUG: get_sliding_attacks: Added square 21, attacks now: 202020200000
DEBUG: get_sliding_attacks: Added square 13, attacks now: 202020202000
DEBUG: get_sliding_attacks: Added square 5, attacks now: 202020202020
DEBUG: get_sliding_attacks: Out of bounds at -3
DEBUG: is_rook_queen_attacked_by: Ray from 53 with delta -8 -> attacks=202020202020
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=20d8202020202020
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=53, attackers_bb=0, occupied_bb=28000000004000
DEBUG: get_sliding_attacks: start_sq=53, delta=9
DEBUG: get_sliding_attacks: Added square 62, attacks now: 4000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 71
DEBUG: get_sliding_attacks: start_sq=53, delta=-9
DEBUG: get_sliding_attacks: Added square 44, attacks now: 100000000000
DEBUG: get_sliding_attacks: Added square 35, attacks now: 100800000000
DEBUG: get_sliding_attacks: Added square 26, attacks now: 100804000000
DEBUG: get_sliding_attacks: Added square 17, attacks now: 100804020000
DEBUG: get_sliding_attacks: Added square 8, attacks now: 100804020100
DEBUG: get_sliding_attacks: Out of bounds at -1
DEBUG: get_sliding_attacks: start_sq=53, delta=7
DEBUG: get_sliding_attacks: Added square 60, attacks now: 1000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 67
DEBUG: get_sliding_attacks: start_sq=53, delta=-7
DEBUG: get_sliding_attacks: Added square 46, attacks now: 400000000000
DEBUG: get_sliding_attacks: Added square 39, attacks now: 408000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 32
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: g8f7 ---
UNDO_START: White King BB: 20000000000000, Black Rook BB: 0, Occupied BB: 28000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Piece Move 5): from_sq=62, to_sq=53
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=20000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 20000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 28000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- APPLYING MOVE: g8g7 ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Piece Move 5): from_sq=62, to_sq=54
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=40000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 40000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_END: White King BB: 40000000000000, Black Rook BB: 0, Occupied BB: 48000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 7 (Index: 54)
Attacking Color: Black
Current White King BB: 40000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 0
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 48000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=54, attackers_bb=0, occupied_bb=48000000004000
DEBUG: get_sliding_attacks: start_sq=54, delta=1
DEBUG: get_sliding_attacks: Added square 55, attacks now: 80000000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 56
DEBUG: is_rook_queen_attacked_by: Ray from 54 with delta 1 -> attacks=80000000000000
DEBUG: get_sliding_attacks: start_sq=54, delta=-1
DEBUG: get_sliding_attacks: Added square 53, attacks now: 20000000000000
DEBUG: get_sliding_attacks: Added square 52, attacks now: 30000000000000
DEBUG: get_sliding_attacks: Added square 51, attacks now: 38000000000000
DEBUG: get_sliding_attacks: Blocker found at 51
DEBUG: is_rook_queen_attacked_by: Ray from 54 with delta -1 -> attacks=38000000000000
DEBUG: get_sliding_attacks: start_sq=54, delta=8
DEBUG: get_sliding_attacks: Added square 62, attacks now: 4000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: is_rook_queen_attacked_by: Ray from 54 with delta 8 -> attacks=4000000000000000
DEBUG: get_sliding_attacks: start_sq=54, delta=-8
DEBUG: get_sliding_attacks: Added square 46, attacks now: 400000000000
DEBUG: get_sliding_attacks: Added square 38, attacks now: 404000000000
DEBUG: get_sliding_attacks: Added square 30, attacks now: 404040000000
DEBUG: get_sliding_attacks: Added square 22, attacks now: 404040400000
DEBUG: get_sliding_attacks: Added square 14, attacks now: 404040404000
DEBUG: get_sliding_attacks: Blocker found at 14
DEBUG: is_rook_queen_attacked_by: Ray from 54 with delta -8 -> attacks=404040404000
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=40b8404040404000
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=54, attackers_bb=0, occupied_bb=48000000004000
DEBUG: get_sliding_attacks: start_sq=54, delta=9
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 72
DEBUG: get_sliding_attacks: start_sq=54, delta=-9
DEBUG: get_sliding_attacks: Added square 45, attacks now: 200000000000
DEBUG: get_sliding_attacks: Added square 36, attacks now: 201000000000
DEBUG: get_sliding_attacks: Added square 27, attacks now: 201008000000
DEBUG: get_sliding_attacks: Added square 18, attacks now: 201008040000
DEBUG: get_sliding_attacks: Added square 9, attacks now: 201008040200
DEBUG: get_sliding_attacks: Added square 0, attacks now: 201008040201
DEBUG: get_sliding_attacks: Out of bounds at -9
DEBUG: get_sliding_attacks: start_sq=54, delta=7
DEBUG: get_sliding_attacks: Added square 61, attacks now: 2000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 68
DEBUG: get_sliding_attacks: start_sq=54, delta=-7
DEBUG: get_sliding_attacks: Added square 47, attacks now: 800000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 40
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: g8g7 ---
UNDO_START: White King BB: 40000000000000, Black Rook BB: 0, Occupied BB: 48000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Piece Move 5): from_sq=62, to_sq=54
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=40000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 40000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 48000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- APPLYING MOVE: g8h7 ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Piece Move 5): from_sq=62, to_sq=55
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=80000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 80000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_END: White King BB: 80000000000000, Black Rook BB: 0, Occupied BB: 88000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 7 (Index: 55)
Attacking Color: Black
Current White King BB: 80000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 0
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 88000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=55, attackers_bb=0, occupied_bb=88000000004000
DEBUG: get_sliding_attacks: start_sq=55, delta=1
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 56
DEBUG: is_rook_queen_attacked_by: Ray from 55 with delta 1 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=55, delta=-1
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 53, attacks now: 60000000000000
DEBUG: get_sliding_attacks: Added square 52, attacks now: 70000000000000
DEBUG: get_sliding_attacks: Added square 51, attacks now: 78000000000000
DEBUG: get_sliding_attacks: Blocker found at 51
DEBUG: is_rook_queen_attacked_by: Ray from 55 with delta -1 -> attacks=78000000000000
DEBUG: get_sliding_attacks: start_sq=55, delta=8
DEBUG: get_sliding_attacks: Added square 63, attacks now: 8000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 71
DEBUG: is_rook_queen_attacked_by: Ray from 55 with delta 8 -> attacks=8000000000000000
DEBUG: get_sliding_attacks: start_sq=55, delta=-8
DEBUG: get_sliding_attacks: Added square 47, attacks now: 800000000000
DEBUG: get_sliding_attacks: Added square 39, attacks now: 808000000000
DEBUG: get_sliding_attacks: Added square 31, attacks now: 808080000000
DEBUG: get_sliding_attacks: Added square 23, attacks now: 808080800000
DEBUG: get_sliding_attacks: Added square 15, attacks now: 808080808000
DEBUG: get_sliding_attacks: Added square 7, attacks now: 808080808080
DEBUG: get_sliding_attacks: Out of bounds at -1
DEBUG: is_rook_queen_attacked_by: Ray from 55 with delta -8 -> attacks=808080808080
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=8078808080808080
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=55, attackers_bb=0, occupied_bb=88000000004000
DEBUG: get_sliding_attacks: start_sq=55, delta=9
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: get_sliding_attacks: start_sq=55, delta=-9
DEBUG: get_sliding_attacks: Added square 46, attacks now: 400000000000
DEBUG: get_sliding_attacks: Added square 37, attacks now: 402000000000
DEBUG: get_sliding_attacks: Added square 28, attacks now: 402010000000
DEBUG: get_sliding_attacks: Added square 19, attacks now: 402010080000
DEBUG: get_sliding_attacks: Added square 10, attacks now: 402010080400
DEBUG: get_sliding_attacks: Added square 1, attacks now: 402010080402
DEBUG: get_sliding_attacks: Out of bounds at -8
DEBUG: get_sliding_attacks: start_sq=55, delta=7
DEBUG: get_sliding_attacks: Added square 62, attacks now: 4000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 69
DEBUG: get_sliding_attacks: start_sq=55, delta=-7
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 48
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: g8h7 ---
UNDO_START: White King BB: 80000000000000, Black Rook BB: 0, Occupied BB: 88000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Piece Move 5): from_sq=62, to_sq=55
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=80000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 80000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 88000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- APPLYING MOVE: g8f8 ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Piece Move 5): from_sq=62, to_sq=61
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=2000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 2000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_END: White King BB: 2000000000000000, Black Rook BB: 0, Occupied BB: 2008000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 61)
Attacking Color: Black
Current White King BB: 2000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 0
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 2008000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=61, attackers_bb=0, occupied_bb=2008000000004000
DEBUG: get_sliding_attacks: start_sq=61, delta=1
DEBUG: get_sliding_attacks: Added square 62, attacks now: 4000000000000000
DEBUG: get_sliding_attacks: Added square 63, attacks now: c000000000000000
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 61 with delta 1 -> attacks=c000000000000000
DEBUG: get_sliding_attacks: start_sq=61, delta=-1
DEBUG: get_sliding_attacks: Added square 60, attacks now: 1000000000000000
DEBUG: get_sliding_attacks: Added square 59, attacks now: 1800000000000000
DEBUG: get_sliding_attacks: Added square 58, attacks now: 1c00000000000000
DEBUG: get_sliding_attacks: Added square 57, attacks now: 1e00000000000000
DEBUG: get_sliding_attacks: Added square 56, attacks now: 1f00000000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 55
DEBUG: is_rook_queen_attacked_by: Ray from 61 with delta -1 -> attacks=1f00000000000000
DEBUG: get_sliding_attacks: start_sq=61, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 69
DEBUG: is_rook_queen_attacked_by: Ray from 61 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=61, delta=-8
DEBUG: get_sliding_attacks: Added square 53, attacks now: 20000000000000
DEBUG: get_sliding_attacks: Added square 45, attacks now: 20200000000000
DEBUG: get_sliding_attacks: Added square 37, attacks now: 20202000000000
DEBUG: get_sliding_attacks: Added square 29, attacks now: 20202020000000
DEBUG: get_sliding_attacks: Added square 21, attacks now: 20202020200000
DEBUG: get_sliding_attacks: Added square 13, attacks now: 20202020202000
DEBUG: get_sliding_attacks: Added square 5, attacks now: 20202020202020
DEBUG: get_sliding_attacks: Out of bounds at -3
DEBUG: is_rook_queen_attacked_by: Ray from 61 with delta -8 -> attacks=20202020202020
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=df20202020202020
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=61, attackers_bb=0, occupied_bb=2008000000004000
DEBUG: get_sliding_attacks: start_sq=61, delta=9
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: get_sliding_attacks: start_sq=61, delta=-9
DEBUG: get_sliding_attacks: Added square 52, attacks now: 10000000000000
DEBUG: get_sliding_attacks: Added square 43, attacks now: 10080000000000
DEBUG: get_sliding_attacks: Added square 34, attacks now: 10080400000000
DEBUG: get_sliding_attacks: Added square 25, attacks now: 10080402000000
DEBUG: get_sliding_attacks: Added square 16, attacks now: 10080402010000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 7
DEBUG: get_sliding_attacks: start_sq=61, delta=7
DEBUG: get_sliding_attacks: Out of bounds at 68
DEBUG: get_sliding_attacks: start_sq=61, delta=-7
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 47, attacks now: 40800000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 40
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: g8f8 ---
UNDO_START: White King BB: 2000000000000000, Black Rook BB: 0, Occupied BB: 2008000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Piece Move 5): from_sq=62, to_sq=61
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=2000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 2000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 2008000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- APPLYING MOVE: g8h8 ---
APPLY_START: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_DEBUG (Piece Move 5): from_sq=62, to_sq=63
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=8000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 8000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
APPLY_END: White King BB: 8000000000000000, Black Rook BB: 0, Occupied BB: 8008000000004000

--- DEBUG: is_king_in_check for White King ---
King Square: 8 (Index: 63)
Attacking Color: Black
Current White King BB: 8000000000000000
Current Black King BB: 4000
Current White Rooks BB: 0
Current Black Rooks BB: 0
Current White Queens BB: 0
Current Black Queens BB: 0
Current Occupied Squares BB: 8008000000004000
DEBUG: Rook/Queen Check. Attackers BB: 0
DEBUG: is_rook_queen_attacked_by: target_sq=63, attackers_bb=0, occupied_bb=8008000000004000
DEBUG: get_sliding_attacks: start_sq=63, delta=1
DEBUG: get_sliding_attacks: Out of bounds at 64
DEBUG: is_rook_queen_attacked_by: Ray from 63 with delta 1 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=63, delta=-1
DEBUG: get_sliding_attacks: Added square 62, attacks now: 4000000000000000
DEBUG: get_sliding_attacks: Added square 61, attacks now: 6000000000000000
DEBUG: get_sliding_attacks: Added square 60, attacks now: 7000000000000000
DEBUG: get_sliding_attacks: Added square 59, attacks now: 7800000000000000
DEBUG: get_sliding_attacks: Added square 58, attacks now: 7c00000000000000
DEBUG: get_sliding_attacks: Added square 57, attacks now: 7e00000000000000
DEBUG: get_sliding_attacks: Added square 56, attacks now: 7f00000000000000
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 55
DEBUG: is_rook_queen_attacked_by: Ray from 63 with delta -1 -> attacks=7f00000000000000
DEBUG: get_sliding_attacks: start_sq=63, delta=8
DEBUG: get_sliding_attacks: Out of bounds at 71
DEBUG: is_rook_queen_attacked_by: Ray from 63 with delta 8 -> attacks=0
DEBUG: get_sliding_attacks: start_sq=63, delta=-8
DEBUG: get_sliding_attacks: Added square 55, attacks now: 80000000000000
DEBUG: get_sliding_attacks: Added square 47, attacks now: 80800000000000
DEBUG: get_sliding_attacks: Added square 39, attacks now: 80808000000000
DEBUG: get_sliding_attacks: Added square 31, attacks now: 80808080000000
DEBUG: get_sliding_attacks: Added square 23, attacks now: 80808080800000
DEBUG: get_sliding_attacks: Added square 15, attacks now: 80808080808000
DEBUG: get_sliding_attacks: Added square 7, attacks now: 80808080808080
DEBUG: get_sliding_attacks: Out of bounds at -1
DEBUG: is_rook_queen_attacked_by: Ray from 63 with delta -8 -> attacks=80808080808080
DEBUG: is_rook_queen_attacked_by: Total attacks_from_target=7f80808080808080
DEBUG: is_rook_queen_attacked_by: Intersection=0
DEBUG: King NOT attacked by Rook/Queen.
DEBUG: Bishop/Queen Check. Attackers BB: 0
DEBUG: is_bishop_queen_attacked_by: target_sq=63, attackers_bb=0, occupied_bb=8008000000004000
DEBUG: get_sliding_attacks: start_sq=63, delta=9
DEBUG: get_sliding_attacks: Out of bounds at 72
DEBUG: get_sliding_attacks: start_sq=63, delta=-9
DEBUG: get_sliding_attacks: Added square 54, attacks now: 40000000000000
DEBUG: get_sliding_attacks: Added square 45, attacks now: 40200000000000
DEBUG: get_sliding_attacks: Added square 36, attacks now: 40201000000000
DEBUG: get_sliding_attacks: Added square 27, attacks now: 40201008000000
DEBUG: get_sliding_attacks: Added square 18, attacks now: 40201008040000
DEBUG: get_sliding_attacks: Added square 9, attacks now: 40201008040200
DEBUG: get_sliding_attacks: Added square 0, attacks now: 40201008040201
DEBUG: get_sliding_attacks: Out of bounds at -9
DEBUG: get_sliding_attacks: start_sq=63, delta=7
DEBUG: get_sliding_attacks: Out of bounds at 70
DEBUG: get_sliding_attacks: start_sq=63, delta=-7
DEBUG: get_sliding_attacks: File wrap (diag/complex) at 56
DEBUG: King NOT attacked by Bishop/Queen.
DEBUG: King is NOT in check.
--- UNDOING MOVE: g8h8 ---
UNDO_START: White King BB: 8000000000000000, Black Rook BB: 0, Occupied BB: 8008000000004000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
UNDO_DEBUG (Piece Move 5): from_sq=62, to_sq=63
  Before clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=8000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 8000000000000000, Black Rook BB: 0
  After clear/set: moving_piece_bb_ptr=0x33f5dff558, *moving_piece_bb_ptr=4000000000000000
  &white_king=0x33f5dff558, &black_rooks=0x33f5dff578
  White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 8008000000004000
UNDO_END: White King BB: 4000000000000000, Black Rook BB: 0, Occupied BB: 4008000000004000
--- Finished Filtering Pseudo-Legal Moves ---

Legal Moves (9):
  d7e8q,   d7e8r,   d7e8b,   d7e8n,   g8f7
  g8g7,   g8h7,   g8f8,   g8h8

Input move (e.g., e2e4, O-O, a7a8q), 'new fen' to reset, or 'quit' to exit:
